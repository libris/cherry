!function t(e,n,r){function o(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=n[s]={exports:{}};e[s][0].call(h.exports,function(t){var n=e[s][1][t];return o(n?n:t)},h,h.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){"use strict";{var r=t("react"),o=t("./router"),i=t("backbone"),s=(t("./collections"),t("./app")),a=(t("./fastlink"),t("ainojs-pubsub"));t("underscore")}i.$=t("jquery"),r.initializeTouchEvents(!0);var c=function(t){r.render(r.createElement(s,{route:t}),document.getElementById("app"))},u=!1;a.on("navclick",function(){u=!0}),o.on("route",function(t,e){var n=window.location.pathname,r=o.crumbs,s=i.history.getFragment();o.backbutton=!u&&r.length>1&&r[r.length-2]==s,o.history.push(n),c({name:t,params:e}),o.backbutton?r.splice(-2,2):window.scrollTo(0,0),r.push(s),u=!1}),i.history.start({pushState:!0})},{"./app":15,"./collections":18,"./fastlink":23,"./router":24,"ainojs-pubsub":2,backbone:"backbone",jquery:"jquery",react:"react",underscore:"underscore"}],2:[function(t,e,n){var r={},o=-1;e.exports.on=function(t,e){r[t]||(r[t]=[]);var n=(++o).toString();return r[t].push({token:n,func:e}),n},e.exports.trigger=function(t,e){if(!r[t])return!1;for(var n=r[t],o=n?n.length:0,i=0;o>i;i++)n[i].func(e);return!0},e.exports.off=function(t){for(var e in r)if(r[e])for(var n=0,o=r[e].length;o>n;n++)if(r[e][n].token===t)return r[e].splice(n,1),t;return!1},e.exports.clear=function(){r={}},e.exports.getTopics=function(){return r}},{}],3:[function(t,e,n){function r(){if(!a){a=!0;for(var t,e=s.length;e;){t=s,s=[];for(var n=-1;++n<e;)t[n]();e=s.length}a=!1}}function o(){}var i=e.exports={},s=[],a=!1;i.nextTick=function(t){s.push(t),a||setTimeout(r,0)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=o,i.addListener=o,i.once=o,i.off=o,i.removeListener=o,i.removeAllListeners=o,i.emit=o,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],4:[function(t,e,n){(function(t){e.exports=!1;try{e.exports="[object process]"===Object.prototype.toString.call(t.process)}catch(n){}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,e,n){(function(t){"use strict";var n,r;n=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t},r=function(t){var e,r=document.createTextNode(""),o=0;return new t(function(){var t;if(e)return t=e,e=null,"function"==typeof t?void t():void t.forEach(function(t){t()})}).observe(r,{characterData:!0}),function(t){return n(t),e?void("function"==typeof e?e=[e,t]:e.push(t)):(e=t,void(r.data=o=++o%2))}},e.exports=function(){if("undefined"!=typeof t&&t&&"function"==typeof t.nextTick)return t.nextTick;if("object"==typeof document&&document){if("function"==typeof MutationObserver)return r(MutationObserver);if("function"==typeof WebKitMutationObserver)return r(WebKitMutationObserver)}return"function"==typeof setImmediate?function(t){setImmediate(n(t))}:"function"==typeof setTimeout?function(t){setTimeout(n(t),0)}:null}()}).call(this,t("_process"))},{_process:3}],6:[function(t,e,n){"use strict";e.exports=t("./lib/core.js"),t("./lib/done.js"),t("./lib/es6-extensions.js"),t("./lib/node-extensions.js")},{"./lib/core.js":7,"./lib/done.js":8,"./lib/es6-extensions.js":9,"./lib/node-extensions.js":10}],7:[function(t,e,n){"use strict";function r(t){function e(t){return null===c?void h.push(t):void s(function(){var e=c?t.onFulfilled:t.onRejected;if(null===e)return void(c?t.resolve:t.reject)(u);var n;try{n=e(u)}catch(r){return void t.reject(r)}t.resolve(n)})}function n(t){try{if(t===l)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void i(e.bind(t),n,r)}c=!0,u=t,a()}catch(o){r(o)}}function r(t){c=!1,u=t,a()}function a(){for(var t=0,n=h.length;n>t;t++)e(h[t]);h=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");var c=null,u=null,h=[],l=this;this.then=function(t,n){return new l.constructor(function(r,i){e(new o(t,n,r,i))})},i(t,n,r)}function o(t,e,n,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r}function i(t,e,n){var r=!1;try{t(function(t){r||(r=!0,e(t))},function(t){r||(r=!0,n(t))})}catch(o){if(r)return;r=!0,n(o)}}var s=t("asap");e.exports=r},{asap:11}],8:[function(t,e,n){"use strict";var r=t("./core.js"),o=t("asap");e.exports=r,r.prototype.done=function(t,e){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(t){o(function(){throw t})})}},{"./core.js":7,asap:11}],9:[function(t,e,n){"use strict";function r(t){this.then=function(e){return"function"!=typeof e?this:new o(function(n,r){i(function(){try{n(e(t))}catch(o){r(o)}})})}}var o=t("./core.js"),i=t("asap");e.exports=o,r.prototype=o.prototype;var s=new r(!0),a=new r(!1),c=new r(null),u=new r(void 0),h=new r(0),l=new r("");o.resolve=function(t){if(t instanceof o)return t;if(null===t)return c;if(void 0===t)return u;if(t===!0)return s;if(t===!1)return a;if(0===t)return h;if(""===t)return l;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new o(e.bind(t))}catch(n){return new o(function(t,e){e(n)})}return new r(t)},o.all=function(t){var e=Array.prototype.slice.call(t);return new o(function(t,n){function r(i,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(t){r(i,t)},n)}e[i]=s,0===--o&&t(e)}catch(c){n(c)}}if(0===e.length)return t([]);for(var o=e.length,i=0;i<e.length;i++)r(i,e[i])})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){t.forEach(function(t){o.resolve(t).then(e,n)})})},o.prototype["catch"]=function(t){return this.then(null,t)}},{"./core.js":7,asap:11}],10:[function(t,e,n){"use strict";var r=t("./core.js"),o=t("asap");e.exports=r,r.denodeify=function(t,e){return e=e||1/0,function(){var n=this,o=Array.prototype.slice.call(arguments);return new r(function(r,i){for(;o.length&&o.length>e;)o.pop();o.push(function(t,e){t?i(t):r(e)});var s=t.apply(n,o);!s||"object"!=typeof s&&"function"!=typeof s||"function"!=typeof s.then||r(s)})}},r.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),n="function"==typeof e[e.length-1]?e.pop():null,i=this;try{return t.apply(this,arguments).nodeify(n,i)}catch(s){if(null===n||"undefined"==typeof n)return new r(function(t,e){e(s)});o(function(){n.call(i,s)})}}},r.prototype.nodeify=function(t,e){return"function"!=typeof t?this:void this.then(function(n){o(function(){t.call(e,null,n)})},function(n){o(function(){t.call(e,n)})})}},{"./core.js":7,asap:11}],11:[function(t,e,n){(function(t){function n(){for(;o.next;){o=o.next;var t=o.task;o.task=void 0;var e=o.domain;e&&(o.domain=void 0,e.enter());try{t()}catch(r){if(c)throw e&&e.exit(),setTimeout(n,0),e&&e.enter(),r;setTimeout(function(){throw r},0)}e&&e.exit()}s=!1}function r(e){i=i.next={task:e,domain:c&&t.domain,next:null},s||(s=!0,a())}var o={task:void 0,next:null},i=o,s=!1,a=void 0,c=!1;if("undefined"!=typeof t&&t.nextTick)c=!0,a=function(){t.nextTick(n)};else if("function"==typeof setImmediate)a="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var u=new MessageChannel;u.port1.onmessage=n,a=function(){u.port2.postMessage(0)}}else a=function(){setTimeout(n,0)};e.exports=r}).call(this,t("_process"))},{_process:3}],12:[function(t,e,n){function r(){}function o(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function i(t){return t===Object(t)}function s(t){if(!i(t))return t;var e=[];for(var n in t)null!=t[n]&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}function a(t){for(var e,n,r={},o=t.split("&"),i=0,s=o.length;s>i;++i)n=o[i],e=n.split("="),r[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return r}function c(t){var e,n,r,o,i=t.split(/\r?\n/),s={};i.pop();for(var a=0,c=i.length;c>a;++a)n=i[a],e=n.indexOf(":"),r=n.slice(0,e).toLowerCase(),o=v(n.slice(e+1)),s[r]=o;return s}function u(t){return t.split(/ *; */).shift()}function h(t){return y(t.split(/ *; */),function(t,e){var n=e.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(t[r]=o),t},{})}function l(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=c(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function f(t,e){var n=this;d.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new l(n)}catch(r){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=r,n.callback(t)}if(n.emit("response",e),t)return n.callback(t,e);if(e.status>=200&&e.status<300)return n.callback(t,e);var o=new Error(e.statusText||"Unsuccessful HTTP response");o.original=t,o.response=e,o.status=e.status,n.callback(t||o,e)})}function p(t,e){return"function"==typeof e?new f("GET",t).end(e):1==arguments.length?new f("GET",t):new f(t,e)}var d=t("emitter"),y=t("reduce"),m="undefined"==typeof window?this||self:window;p.getXHR=function(){if(!(!m.XMLHttpRequest||m.location&&"file:"==m.location.protocol&&m.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var v="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};p.serializeObject=s,p.parseString=a,p.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},p.serialize={"application/x-www-form-urlencoded":s,"application/json":JSON.stringify},p.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},l.prototype.get=function(t){return this.header[t.toLowerCase()]},l.prototype.setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=u(e);var n=h(e);for(var r in n)this[r]=n[r]},l.prototype.parseBody=function(t){var e=p.parse[this.type];return e&&t&&(t.length||t instanceof Object)?e(t):null},l.prototype.setStatusProperties=function(t){1223===t&&(t=204);var e=t/100|0;this.status=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},l.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,r="cannot "+e+" "+n+" ("+this.status+")",o=new Error(r);return o.status=this.status,o.method=e,o.url=n,o},p.Response=l,d(f.prototype),f.prototype.use=function(t){return t(this),this},f.prototype.timeout=function(t){return this._timeout=t,this},f.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},f.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},f.prototype.set=function(t,e){if(i(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},f.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},f.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},f.prototype.type=function(t){return this.set("Content-Type",p.types[t]||t),this},f.prototype.accept=function(t){return this.set("Accept",p.types[t]||t),this},f.prototype.auth=function(t,e){var n=btoa(t+":"+e);return this.set("Authorization","Basic "+n),this},f.prototype.query=function(t){return"string"!=typeof t&&(t=s(t)),t&&this._query.push(t),this},f.prototype.field=function(t,e){return this._formData||(this._formData=new m.FormData),this._formData.append(t,e),this},f.prototype.attach=function(t,e,n){return this._formData||(this._formData=new m.FormData),this._formData.append(t,e,n),this},f.prototype.send=function(t){var e=i(t),n=this.getHeader("Content-Type");if(e&&i(this._data))for(var r in t)this._data[r]=t[r];else"string"==typeof t?(n||this.type("form"),n=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+t:t:(this._data||"")+t):this._data=t;return!e||o(t)?this:(n||this.type("json"),this)},f.prototype.callback=function(t,e){var n=this._callback;this.clearTimeout(),n(t,e)},f.prototype.crossDomainError=function(){var t=new Error("Origin is not allowed by Access-Control-Allow-Origin");t.crossDomain=!0,this.callback(t)},f.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},f.prototype.withCredentials=function(){return this._withCredentials=!0,this},f.prototype.end=function(t){var e=this,n=this.xhr=p.getXHR(),i=this._query.join("&"),s=this._timeout,a=this._formData||this._data;this._callback=t||r,n.onreadystatechange=function(){if(4==n.readyState){var t;try{t=n.status}catch(r){t=0}if(0==t){if(e.timedout)return e.timeoutError();if(e.aborted)return;return e.crossDomainError()}e.emit("end")}};var c=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.emit("progress",t)};this.hasListeners("progress")&&(n.onprogress=c);try{n.upload&&this.hasListeners("progress")&&(n.upload.onprogress=c)}catch(u){}if(s&&!this._timer&&(this._timer=setTimeout(function(){e.timedout=!0,e.abort()},s)),i&&(i=p.serializeObject(i),this.url+=~this.url.indexOf("?")?"&"+i:"?"+i),n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!o(a)){var h=p.serialize[this.getHeader("Content-Type")];h&&(a=h(a))}for(var l in this.header)null!=this.header[l]&&n.setRequestHeader(l,this.header[l]);return this.emit("request",this),n.send(a),this},p.Request=f,p.get=function(t,e,n){var r=p("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},p.head=function(t,e,n){var r=p("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},p.del=function(t,e){var n=p("DELETE",t);return e&&n.end(e),n},p.patch=function(t,e,n){var r=p("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},p.post=function(t,e,n){var r=p("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},p.put=function(t,e,n){var r=p("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},e.exports=p},{emitter:13,reduce:14}],13:[function(t,e,n){function r(t){return t?o(t):void 0}function o(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){r.off(t,n),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===e||r.fn===e){n.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var r=0,o=n.length;o>r;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],14:[function(t,e,n){e.exports=function(t,e,n){for(var r=0,o=t.length,i=3==arguments.length?n:t[r++];o>r;)i=e.call(null,i,t[r],++r,t);return i}},{}],15:[function(t,e,n){"use strict";var r=t("react"),o=t("./collections"),i=t("./fastlink"),s=(t("ainojs-pubsub"),t("./clickhandlers")),a=t("./router"),c=t("./components/404");e.exports=r.createClass({displayName:"exports",componentDidMount:function(){o.each(function(t){t.on("add change remove reset",function(){this.forceUpdate()},this)},this)},render:function(){var t=a.getRouteHandler(this.props.route.name)||r.createElement(c,null);return r.createElement(i,{onUp:s.onDeviceUp,onDown:s.onDeviceDown,onCancel:s.onDeviceCancel},r.createElement("header",null,r.createElement("a",{href:"/"},"Home"),r.createElement("a",{href:"/detail"},"Detail")),r.createElement(t,{route:this.props.route,ref:"handler"}))}})},{"./clickhandlers":16,"./collections":18,"./components/404":19,"./fastlink":23,"./router":24,"ainojs-pubsub":2,react:"react"}],16:[function(t,e,n){"use strict";var r=t("backbone"),o=t("./router"),i=t("ainojs-pubsub"),s=t("next-tick"),a=function(t){for(;t.parentNode&&"A"!=t.nodeName;)t=t.parentNode;return t.nodeName&&"A"==t.nodeName?t:null};e.exports.onDeviceUp=function(t){var e=a(t.target);if(e){e.removeAttribute("data-active");var n=e.getAttribute("href");if(n&&"#"!=n||(n=e.getAttribute("data-href")),n){if("_blank"==e.getAttribute("target"))window.open(n);else if(e.hostname!==window.location.hostname||e.protocol!==window.location.protocol)window.location=n;else{var c=document.createElement("a");c.href=n,e.setAttribute("data-href",n),e.setAttribute("href","#"),c.href==window.location.href?r.history.loadUrl(n):(i.trigger("clicknav"),s(function(){o.navigate(n,!0)}))}t.preventDefault()}}},e.exports.onDeviceDown=function(t){var e=a(t.target);e&&e.setAttribute("data-active","")},e.exports.onDeviceCancel=function(t){var e=a(t.target);e&&e.removeAttribute("data-active")}},{"./router":24,"ainojs-pubsub":2,backbone:"backbone","next-tick":5}],17:[function(t,e,n){"use strict";var r=t("backbone"),o=t("promise"),i=t("superagent"),s=t("underscore"),a=t("detect-node"),c=r.Collection.extend({cacheTTL:60,dataUrl:null,listKey:"result",cache:[],model:r.Model.extend({}),initialize:function(){r.Collection.prototype.initialize.apply(this,arguments),this.cache=[],this._loading=!1,this._empty=!1},isCached:function(t){this.invalidateCache();var e=t?JSON.stringify(t):"";return!!s.findWhere(this.cache,{q:e})},insertData:function(t){if(!t)throw"No JSON data found in response";if(!t.hasOwnProperty(this.listKey))throw'Key "'+this.listKey+'" not found in response';return this._empty=!t[this.listKey].length,this.reset(t[this.listKey]),this._loading=!1,this.trigger("change"),t},insertDataFromCache:function(t){this.cache=t,t.forEach(function(t){this.insertData({result:t[this.listKey]})},this)},invalidateCache:function(){a||(this.cache=this.cache.filter(function(t){return t.ttl>Date.now()}))},load:function(t){return new o(function(e,n){this._loading=!0,this._empty=!1,this.reset();var r=t?JSON.stringify(t):"";this.invalidateCache();var o=s.findWhere(this.cache,{q:r});if(o){var c=this.insertData(o);return e(c)}var u=a?"http://localhost:7000"+this.dataUrl:this.dataUrl;i.get(u).set("X-Requested-With","XMLHttpRequest").set("Cache-Control","no-cache,no-store,must-revalidate,max-age=-1").query(t).end(function(t,o){if(t)return n(t.code);if(o.ok){var i=this.insertData(o.body);e(i),this.cache.push(s.extend(i,{q:r,ttl:Date.now()+1e3*this.cacheTTL*60}))}else n(o.text)}.bind(this))}.bind(this))},isLoading:function(){return!!this._loading},isEmpty:function(){return!!this._empty},comparator:function(t){var e=t.get("position");return"undefined"!=typeof e?e:t.get("name")},getModel:function(t){var e=this.findWhere(t);return e?e:this._loading?new this.model:void 0}});e.exports=function(t){var e,n={},r={},o=function(){};for(e in t)n[e]=c.extend(t[e]);if(a)o=function(t){t.collections={};for(var e in n)t.collections[e]=new n[e];r=t.collections};else for(e in n)r[e]=new n[e];return{init:o,get:function(t){return r[t]},each:function(t,e){return s.each(r,t,e||this)}}}},{backbone:"backbone","detect-node":4,promise:6,superagent:12,underscore:"underscore"}],18:[function(t,e,n){"use strict";var r=(t("backbone"),t("./collectionfactory"));e.exports=r({trending:{dataUrl:"/api/trending",cacheTTL:5,listKey:"items"}})},{"./collectionfactory":17,backbone:"backbone"}],19:[function(t,e,n){"use strict";var r=t("react");e.exports=r.createClass({displayName:"exports",render:function(){return"404"}})},{react:"react"}],20:[function(t,e,n){"use strict";var r=t("react");e.exports=r.createClass({displayName:"exports",render:function(){return r.createElement("h1",null,"Detail")}})},{react:"react"}],21:[function(t,e,n){"use strict";var r=t("react"),o=t("../data"),i=t("../collections").get("trending");e.exports=r.createClass({displayName:"exports",mixins:[o.mixin],getDataDependencies:function(){return[{collection:"trending",query:{q:"apa"}}]},getInitialState:function(){return{loading:!0}},dataDidLoad:function(){this.setState({loading:!1})},render:function(){return this.state.loading?r.createElement("p",null,"Loading trending topics_"):r.createElement("p",null,JSON.stringify(i))}})},{"../collections":18,"../data":22,react:"react"}],22:[function(t,e,n){"use strict";var r=t("promise"),o=t("./collections"),i=t("detect-node"),s=t("ainojs-pubsub"),a=[],c=!1;e.exports.mixin={componentWillMount:function(){var t=this.getDataDependencies();if(t&&t.length){var e=!0,n=t.map(function(t){var n=o.get(t.collection);return e&&!n.isCached(t.query)&&(e=!1),n.load(t.query)});i?(this.isMounted()&&"function"==typeof this.dataDidLoad&&this.dataDidLoad(),"init"==c&&Array.prototype.push.apply(a,n)):e&&(this.isMounted()&&"function"==typeof this.dataDidLoad?this.dataDidLoad():(s.trigger("loadstart"),r.all(n).then(function(){this.dataDidLoad(),s.trigger("loadfinish")}.bind(this))["catch"](function(t){console.error(t.stack)})))}}},i&&(e.exports.getResolvers=function(){return c="prepare",a},e.exports.dataReady=function(){c="ready",a=[]},e.exports.init=function(){c="init",a=[]})},{"./collections":18,"ainojs-pubsub":2,"detect-node":4,promise:6}],23:[function(t,e,n){"use strict";var r=t("react"),o=t("next-tick"),i=t("jquery"),s=function(t){t.preventDefault()},a=[],c=function(t){for(var e in t)document.addEventListener(e,t[e],!1),a.push({type:e,fn:t[e]})},u=function(){o(function(){a.forEach(function(t){document.removeEventListener(t.type,t.fn)})})};e.exports=r.createClass({displayName:"exports",contextTypes:{router:r.PropTypes.func},timer:null,getInitialState:function(){return{type:null,evObj:null,coords:{x:0,y:0},modified:!1}},getDefaultProps:function(){return{nodeName:"div",className:"link"}},componentWillUnmount:function(){u(),this.getDOMNode().removeEventListener("select",s),clearTimeout(this.timer)},trigger:function(t){var e=this.props["on"+t.charAt(0).toUpperCase()+t.substr(1)];"function"==typeof e&&e(this.state.evObj)},getCoords:function(t){if(t.touches&&t.touches.length){var e=t.touches[0];return{x:e.pageX,y:e.pageY}}return{x:t.pageX,y:t.pageY}},cancel:function(){this.destroy(),this.trigger("cancel")},destroy:function(){u(),this.getDOMNode().removeEventListener("select",s)},onMouseDown:function(t){return"touch"==this.state.type?t.preventDefault():0!==t.button||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey?this.setState({modified:!0}):(c({mousemove:this.onMove,mouseup:this.onUp,dragend:this.cancel,contextmenu:this.destroy}),this.getDOMNode().addEventListener("select",s),void this.setState({evObj:i.extend(!0,{},t),type:"mouse"},function(){this.trigger("down")}))},onTouchStart:function(t){return"mouse"==this.state.type?t.preventDefault():(c({touchmove:this.onMove,touchend:this.onUp}),void this.setState({type:"touch",evObj:i.extend(!0,{},t)},function(){this.trigger("down")}))},onMove:function(t){this.getDOMNode();if("mousemove"==t.type)this.getDOMNode().contains(t.target)||this.cancel();else{var e=this.getCoords(t),n=Math.max(Math.abs(this.state.coords.x-e.x),Math.abs(this.state.coords.y-e.y));n>6?this.cancel():this.setState({coords:e})}},onUp:function(t){this.state.modified||(this.timer=setTimeout(function(){this.setState({type:null})}.bind(this),400),this.destroy(),this.trigger("up"))},onClick:function(t){return this.state.modified?void this.setState({modified:!1}):void t.preventDefault()},render:function(){var t=this.props.nodeName,e=[this.props.className],n={className:e.join(" "),onTouchStart:this.onTouchStart,onMouseDown:this.onMouseDown,onClick:this.onClick};return"a"==t&&(n.href=this.props.href),r.createElement(t,n,this.props.children)}})},{jquery:"jquery","next-tick":5,react:"react"}],24:[function(t,e,n){"use strict";var r=t("backbone"),o=t("underscore"),i={home:t("./components/home"),detail:t("./components/detail"),404:t("./components/404")},s=r.Router.extend({initialize:function(){this.route(/(.*)\/+$/,"trailFix",function(t){this.navigate(t.replace(/(\/)+$/,""),!0)})},routes:{"":"home",detail:"detail","*404":"404"},history:[],crumbs:[],backbutton:!1,getRouteProps:function(t){t=t||window.location;var e=decodeURI(t.pathname+(t.search||"")),n=null,r=o.keys(o.result(this,"routes")),i={name:"",params:[]},s=-1;for(e=e.replace(/^[#\/]|\s+$/g,"").replace(/^\//,"");null===n&&++s<r.length;)n=e.match(this._routeToRegExp(r[s]));return n&&(i.name=this.routes[r[s]],i.params=n.slice(1,n.length-1)),i},getRouteHandler:function(t){return t in i?i[t]:null}});e.exports=new s},{"./components/404":19,"./components/detail":20,"./components/home":21,backbone:"backbone",underscore:"underscore"}]},{},[1]);
//# sourceMappingURL=main.js.map