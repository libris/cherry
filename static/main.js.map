{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","main.js","src/js/index.js","node_modules/ainojs-pubsub/index.js","node_modules/browserify/node_modules/process/browser.js","node_modules/detect-node/index.js","node_modules/next-tick/index.js","node_modules/promise/index.js","node_modules/promise/lib/core.js","node_modules/promise/lib/done.js","node_modules/promise/lib/es6-extensions.js","node_modules/promise/lib/node-extensions.js","node_modules/promise/node_modules/asap/asap.js","node_modules/superagent/lib/client.js","node_modules/superagent/node_modules/component-emitter/index.js","node_modules/superagent/node_modules/reduce-component/index.js","src/js/app.js","src/js/clickhandlers.js","src/js/collectionfactory.js","src/js/collections.js","src/js/components/404.js","src/js/components/detail.js","src/js/components/home.js","src/js/data.js","src/js/fastlink.js","src/js/router.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","React","Router","Backbone","App","PubSub","$","initializeTouchEvents","render","route","createElement","document","getElementById","didClick","on","name","params","path","window","location","pathname","crumbs","fragment","history","getFragment","backbutton","push","splice","scrollTo","start","pushState","./app","./collections","./fastlink","./router","ainojs-pubsub","backbone","jquery","react","underscore",2,"topics","subUid","topic","func","token","toString","trigger","args","subscribers","len","off","m","j","clear","getTopics",3,"drainQueue","draining","currentQueue","queue","noop","process","nextTick","fun","setTimeout","title","browser","env","argv","version","versions","addListener","once","removeListener","removeAllListeners","emit","binding","cwd","chdir","dir","umask",4,"global","Object","prototype","this","self",5,"callable","byObserver","fn","TypeError","Observer","node","createTextNode","data","forEach","observe","characterData","MutationObserver","WebKitMutationObserver","setImmediate","cb","_process",6,"./lib/core.js","./lib/done.js","./lib/es6-extensions.js","./lib/node-extensions.js",7,"Promise","handle","deferred","state","deferreds","asap","onFulfilled","onRejected","resolve","reject","value","ret","newValue","then","doResolve","bind","finale","constructor","Handler","done","reason","ex",8,"arguments","apply","err","./core.js",9,"ValuePromise","TRUE","FALSE","NULL","UNDEFINED","undefined","ZERO","EMPTYSTRING","all","arr","Array","slice","res","val","remaining","race","values",10,"denodeify","argumentCount","Infinity","pop","nodeify","callback","ctx",11,"flush","head","next","task","domain","enter","isNodeJS","exit","flushing","tail","requestFlush","MessageChannel","channel","port1","onmessage","port2","postMessage",12,"isHost","obj","str","isObject","serialize","pairs","key","encodeURIComponent","join","parseString","parts","pair","split","decodeURIComponent","parseHeader","index","line","field","lines","fields","indexOf","toLowerCase","trim","type","shift","reduce","Response","req","options","xhr","text","method","responseType","responseText","statusText","setStatusProperties","status","header","headers","getAllResponseHeaders","getResponseHeader","setHeaderProperties","body","parseBody","response","Request","url","Emitter","_query","_header","parse","original","new_err","request","end","root","getXHR","XMLHttpRequest","protocol","ActiveXObject","replace","serializeObject","types","html","json","xml","urlencoded","form","form-data","application/x-www-form-urlencoded","application/json","JSON","stringify","get","ct","statusType","info","ok","clientError","serverError","error","toError","accepted","noContent","badRequest","unauthorized","notAcceptable","notFound","forbidden","msg","use","timeout","ms","_timeout","clearTimeout","_timer","abort","aborted","set","unset","getHeader","accept","auth","user","pass","btoa","query","_formData","FormData","append","attach","file","filename","send","_data","_callback","crossDomainError","crossDomain","timeoutError","withCredentials","_withCredentials","onreadystatechange","readyState","timedout","handleProgress","total","percent","loaded","hasListeners","onprogress","upload","open","setRequestHeader","del","patch","post","put","emitter",13,"mixin","addEventListener","event","_callbacks","removeEventListener","callbacks","listeners",14,"initial","idx","curr",15,"Link","ClickHandlers","NotFound","createClass","displayName","getRouteHandler","props","onUp","onDeviceUp","onDown","onDeviceDown","onCancel","onDeviceCancel","href","ref","./clickhandlers","./components/404",16,"Tick","getLink","target","parentNode","nodeName","link","removeAttribute","getAttribute","hostname","fake","setAttribute","loadUrl","navigate","preventDefault","next-tick",17,"_","isNode","BaseCollection","Collection","extend","cacheTTL","dataUrl","listKey","cache","model","Model","initialize","_loading","_empty","isCached","invalidateCache","q","findWhere","insertData","result","hasOwnProperty","reset","insertDataFromCache","c","filter","ttl","Date","now","load","isLoading","isEmpty","comparator","position","getModel","needle","collections","locals","externals","init","session","each","context","detect-node","promise","superagent",18,"CollectionFactory","trending","./collectionfactory",19,20,21,"Data","mixins","getDataDependencies","collection","foo","../collections","../data",22,"resolvers","componentWillMount","deps","promises","map","dep","dataDidLoad","console","stack","getResolvers","dataReady",23,"addListeners","removeListeners","contextTypes","router","PropTypes","timer","getInitialState","evObj","coords","x","y","modified","getDefaultProps","className","componentWillUnmount","getDOMNode","charAt","toUpperCase","substr","getCoords","touches","touch","pageX","pageY","cancel","destroy","onMouseDown","button","metaKey","altKey","ctrlKey","shiftKey","setState","mousemove","onMove","mouseup","dragend","contextmenu","onTouchStart","touchmove","touchend","contains","distance","Math","max","abs","onClick","classNames","children",24,"handlers","home","detail",404,"id","routes","*404","getRouteProps","loc","decodeURI","search","match","keys","_routeToRegExp","./components/detail","./components/home"],"mappings":"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","file":"main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",null,"var React = require('react')\nvar Router = require('./router')\nvar Backbone = require('backbone')\nvar collections = require('./collections')\nvar App = require('./app')\nvar Link = require('./fastlink')\nvar PubSub = require('ainojs-pubsub')\nvar _ = require('underscore')\n\nBackbone.$ = require('jquery')\n\n// This runs in the browser\n\nReact.initializeTouchEvents(true)\n\nvar render = function(route) {\n  React.render(<App route={route} />, document.getElementById('app'))\n}\n\nvar didClick = false\nPubSub.on('navclick', function() {\n  didClick = true\n})\n\nRouter.on('route', function(name, params) {\n\n  var path = window.location.pathname\n  var crumbs = Router.crumbs\n  var fragment = Backbone.history.getFragment()\n\n  Router.backbutton = !didClick && crumbs.length > 1 && crumbs[crumbs.length-2] == fragment\n\n  Router.history.push(path)\n\n  render({ \n    name: name, \n    params: params \n  })\n\n  if ( Router.backbutton )\n    crumbs.splice(-2,2)\n  else \n    window.scrollTo(0,0)\n  crumbs.push(fragment)\n\n  didClick = false\n\n})\n\nBackbone.history.start({pushState: true})\n","\nvar topics = {}\nvar subUid = -1\n\nmodule.exports.on = function(topic, func) {\n  if (!topics[topic]) {\n    topics[topic] = []\n  }\n  var token = (++subUid).toString()\n  topics[topic].push({\n    token: token,\n    func: func\n  })\n  return token\n}\n\nmodule.exports.trigger = function(topic, args) {\n  if (!topics[topic])\n    return false\n  var subscribers = topics[topic]\n  var len = subscribers ? subscribers.length : 0\n  var i = 0\n  for(; i<len; i++)\n    subscribers[i].func(args)\n  return true\n}\n\nmodule.exports.off = function(token) {\n  for (var m in topics) {\n    if (topics[m]) {\n      for (var i = 0, j = topics[m].length; i < j; i++) {\n        if (topics[m][i].token === token) {\n          topics[m].splice(i, 1)\n          return token\n        }\n      }\n    }\n  }\n  return false\n}\n\nmodule.exports.clear = function() {\n  topics = {}\n}\n\nmodule.exports.getTopics = function() {\n  return topics\n}","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    draining = true;\n    var currentQueue;\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        var i = -1;\n        while (++i < len) {\n            currentQueue[i]();\n        }\n        len = queue.length;\n    }\n    draining = false;\n}\nprocess.nextTick = function (fun) {\n    queue.push(fun);\n    if (!draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = false;\n\n// Only Node.JS has a process variable that is of [[Class]] process\ntry {\n module.exports = Object.prototype.toString.call(global.process) === '[object process]' \n} catch(e) {}\n","'use strict';\n\nvar callable, byObserver;\n\ncallable = function (fn) {\n\tif (typeof fn !== 'function') throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n\nbyObserver = function (Observer) {\n\tvar node = document.createTextNode(''), queue, i = 0;\n\tnew Observer(function () {\n\t\tvar data;\n\t\tif (!queue) return;\n\t\tdata = queue;\n\t\tqueue = null;\n\t\tif (typeof data === 'function') {\n\t\t\tdata();\n\t\t\treturn;\n\t\t}\n\t\tdata.forEach(function (fn) { fn(); });\n\t}).observe(node, { characterData: true });\n\treturn function (fn) {\n\t\tcallable(fn);\n\t\tif (queue) {\n\t\t\tif (typeof queue === 'function') queue = [queue, fn];\n\t\t\telse queue.push(fn);\n\t\t\treturn;\n\t\t}\n\t\tqueue = fn;\n\t\tnode.data = (i = ++i % 2);\n\t};\n};\n\nmodule.exports = (function () {\n\t// Node.js\n\tif ((typeof process !== 'undefined') && process &&\n\t\t\t(typeof process.nextTick === 'function')) {\n\t\treturn process.nextTick;\n\t}\n\n\t// MutationObserver=\n\tif ((typeof document === 'object') && document) {\n\t\tif (typeof MutationObserver === 'function') {\n\t\t\treturn byObserver(MutationObserver);\n\t\t}\n\t\tif (typeof WebKitMutationObserver === 'function') {\n\t\t\treturn byObserver(WebKitMutationObserver);\n\t\t}\n\t}\n\n\t// W3C Draft\n\t// http://dvcs.w3.org/hg/webperf/raw-file/tip/specs/setImmediate/Overview.html\n\tif (typeof setImmediate === 'function') {\n\t\treturn function (cb) { setImmediate(callable(cb)); };\n\t}\n\n\t// Wide available standard\n\tif (typeof setTimeout === 'function') {\n\t\treturn function (cb) { setTimeout(callable(cb), 0); };\n\t}\n\n\treturn null;\n}());\n","'use strict';\n\nmodule.exports = require('./lib/core.js')\nrequire('./lib/done.js')\nrequire('./lib/es6-extensions.js')\nrequire('./lib/node-extensions.js')","'use strict';\n\nvar asap = require('asap')\n\nmodule.exports = Promise;\nfunction Promise(fn) {\n  if (typeof this !== 'object') throw new TypeError('Promises must be constructed via new')\n  if (typeof fn !== 'function') throw new TypeError('not a function')\n  var state = null\n  var value = null\n  var deferreds = []\n  var self = this\n\n  this.then = function(onFulfilled, onRejected) {\n    return new self.constructor(function(resolve, reject) {\n      handle(new Handler(onFulfilled, onRejected, resolve, reject))\n    })\n  }\n\n  function handle(deferred) {\n    if (state === null) {\n      deferreds.push(deferred)\n      return\n    }\n    asap(function() {\n      var cb = state ? deferred.onFulfilled : deferred.onRejected\n      if (cb === null) {\n        (state ? deferred.resolve : deferred.reject)(value)\n        return\n      }\n      var ret\n      try {\n        ret = cb(value)\n      }\n      catch (e) {\n        deferred.reject(e)\n        return\n      }\n      deferred.resolve(ret)\n    })\n  }\n\n  function resolve(newValue) {\n    try { //Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n      if (newValue === self) throw new TypeError('A promise cannot be resolved with itself.')\n      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n        var then = newValue.then\n        if (typeof then === 'function') {\n          doResolve(then.bind(newValue), resolve, reject)\n          return\n        }\n      }\n      state = true\n      value = newValue\n      finale()\n    } catch (e) { reject(e) }\n  }\n\n  function reject(newValue) {\n    state = false\n    value = newValue\n    finale()\n  }\n\n  function finale() {\n    for (var i = 0, len = deferreds.length; i < len; i++)\n      handle(deferreds[i])\n    deferreds = null\n  }\n\n  doResolve(fn, resolve, reject)\n}\n\n\nfunction Handler(onFulfilled, onRejected, resolve, reject){\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null\n  this.resolve = resolve\n  this.reject = reject\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, onFulfilled, onRejected) {\n  var done = false;\n  try {\n    fn(function (value) {\n      if (done) return\n      done = true\n      onFulfilled(value)\n    }, function (reason) {\n      if (done) return\n      done = true\n      onRejected(reason)\n    })\n  } catch (ex) {\n    if (done) return\n    done = true\n    onRejected(ex)\n  }\n}\n","'use strict';\n\nvar Promise = require('./core.js')\nvar asap = require('asap')\n\nmodule.exports = Promise\nPromise.prototype.done = function (onFulfilled, onRejected) {\n  var self = arguments.length ? this.then.apply(this, arguments) : this\n  self.then(null, function (err) {\n    asap(function () {\n      throw err\n    })\n  })\n}","'use strict';\n\n//This file contains the ES6 extensions to the core Promises/A+ API\n\nvar Promise = require('./core.js')\nvar asap = require('asap')\n\nmodule.exports = Promise\n\n/* Static Functions */\n\nfunction ValuePromise(value) {\n  this.then = function (onFulfilled) {\n    if (typeof onFulfilled !== 'function') return this\n    return new Promise(function (resolve, reject) {\n      asap(function () {\n        try {\n          resolve(onFulfilled(value))\n        } catch (ex) {\n          reject(ex);\n        }\n      })\n    })\n  }\n}\nValuePromise.prototype = Promise.prototype\n\nvar TRUE = new ValuePromise(true)\nvar FALSE = new ValuePromise(false)\nvar NULL = new ValuePromise(null)\nvar UNDEFINED = new ValuePromise(undefined)\nvar ZERO = new ValuePromise(0)\nvar EMPTYSTRING = new ValuePromise('')\n\nPromise.resolve = function (value) {\n  if (value instanceof Promise) return value\n\n  if (value === null) return NULL\n  if (value === undefined) return UNDEFINED\n  if (value === true) return TRUE\n  if (value === false) return FALSE\n  if (value === 0) return ZERO\n  if (value === '') return EMPTYSTRING\n\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value))\n      }\n    } catch (ex) {\n      return new Promise(function (resolve, reject) {\n        reject(ex)\n      })\n    }\n  }\n\n  return new ValuePromise(value)\n}\n\nPromise.all = function (arr) {\n  var args = Array.prototype.slice.call(arr)\n\n  return new Promise(function (resolve, reject) {\n    if (args.length === 0) return resolve([])\n    var remaining = args.length\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then\n          if (typeof then === 'function') {\n            then.call(val, function (val) { res(i, val) }, reject)\n            return\n          }\n        }\n        args[i] = val\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex)\n      }\n    }\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i])\n    }\n  })\n}\n\nPromise.reject = function (value) {\n  return new Promise(function (resolve, reject) { \n    reject(value);\n  });\n}\n\nPromise.race = function (values) {\n  return new Promise(function (resolve, reject) { \n    values.forEach(function(value){\n      Promise.resolve(value).then(resolve, reject);\n    })\n  });\n}\n\n/* Prototype Methods */\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n}\n","'use strict';\n\n//This file contains then/promise specific extensions that are only useful for node.js interop\n\nvar Promise = require('./core.js')\nvar asap = require('asap')\n\nmodule.exports = Promise\n\n/* Static Functions */\n\nPromise.denodeify = function (fn, argumentCount) {\n  argumentCount = argumentCount || Infinity\n  return function () {\n    var self = this\n    var args = Array.prototype.slice.call(arguments)\n    return new Promise(function (resolve, reject) {\n      while (args.length && args.length > argumentCount) {\n        args.pop()\n      }\n      args.push(function (err, res) {\n        if (err) reject(err)\n        else resolve(res)\n      })\n      var res = fn.apply(self, args)\n      if (res && (typeof res === 'object' || typeof res === 'function') && typeof res.then === 'function') {\n        resolve(res)\n      }\n    })\n  }\n}\nPromise.nodeify = function (fn) {\n  return function () {\n    var args = Array.prototype.slice.call(arguments)\n    var callback = typeof args[args.length - 1] === 'function' ? args.pop() : null\n    var ctx = this\n    try {\n      return fn.apply(this, arguments).nodeify(callback, ctx)\n    } catch (ex) {\n      if (callback === null || typeof callback == 'undefined') {\n        return new Promise(function (resolve, reject) { reject(ex) })\n      } else {\n        asap(function () {\n          callback.call(ctx, ex)\n        })\n      }\n    }\n  }\n}\n\nPromise.prototype.nodeify = function (callback, ctx) {\n  if (typeof callback != 'function') return this\n\n  this.then(function (value) {\n    asap(function () {\n      callback.call(ctx, null, value)\n    })\n  }, function (err) {\n    asap(function () {\n      callback.call(ctx, err)\n    })\n  })\n}\n","\n// Use the fastest possible means to execute a task in a future turn\n// of the event loop.\n\n// linked list of tasks (single, with head node)\nvar head = {task: void 0, next: null};\nvar tail = head;\nvar flushing = false;\nvar requestFlush = void 0;\nvar isNodeJS = false;\n\nfunction flush() {\n    /* jshint loopfunc: true */\n\n    while (head.next) {\n        head = head.next;\n        var task = head.task;\n        head.task = void 0;\n        var domain = head.domain;\n\n        if (domain) {\n            head.domain = void 0;\n            domain.enter();\n        }\n\n        try {\n            task();\n\n        } catch (e) {\n            if (isNodeJS) {\n                // In node, uncaught exceptions are considered fatal errors.\n                // Re-throw them synchronously to interrupt flushing!\n\n                // Ensure continuation if the uncaught exception is suppressed\n                // listening \"uncaughtException\" events (as domains does).\n                // Continue in next event to avoid tick recursion.\n                if (domain) {\n                    domain.exit();\n                }\n                setTimeout(flush, 0);\n                if (domain) {\n                    domain.enter();\n                }\n\n                throw e;\n\n            } else {\n                // In browsers, uncaught exceptions are not fatal.\n                // Re-throw them asynchronously to avoid slow-downs.\n                setTimeout(function() {\n                   throw e;\n                }, 0);\n            }\n        }\n\n        if (domain) {\n            domain.exit();\n        }\n    }\n\n    flushing = false;\n}\n\nif (typeof process !== \"undefined\" && process.nextTick) {\n    // Node.js before 0.9. Note that some fake-Node environments, like the\n    // Mocha test runner, introduce a `process` global without a `nextTick`.\n    isNodeJS = true;\n\n    requestFlush = function () {\n        process.nextTick(flush);\n    };\n\n} else if (typeof setImmediate === \"function\") {\n    // In IE10, Node.js 0.9+, or https://github.com/NobleJS/setImmediate\n    if (typeof window !== \"undefined\") {\n        requestFlush = setImmediate.bind(window, flush);\n    } else {\n        requestFlush = function () {\n            setImmediate(flush);\n        };\n    }\n\n} else if (typeof MessageChannel !== \"undefined\") {\n    // modern browsers\n    // http://www.nonblocking.io/2011/06/windownexttick.html\n    var channel = new MessageChannel();\n    channel.port1.onmessage = flush;\n    requestFlush = function () {\n        channel.port2.postMessage(0);\n    };\n\n} else {\n    // old browsers\n    requestFlush = function () {\n        setTimeout(flush, 0);\n    };\n}\n\nfunction asap(task) {\n    tail = tail.next = {\n        task: task,\n        domain: isNodeJS && process.domain,\n        next: null\n    };\n\n    if (!flushing) {\n        flushing = true;\n        requestFlush();\n    }\n};\n\nmodule.exports = asap;\n\n","/**\n * Module dependencies.\n */\n\nvar Emitter = require('emitter');\nvar reduce = require('reduce');\n\n/**\n * Root reference for iframes.\n */\n\nvar root = 'undefined' == typeof window\n  ? (this || self)\n  : window;\n\n/**\n * Noop.\n */\n\nfunction noop(){};\n\n/**\n * Check if `obj` is a host object,\n * we don't want to serialize these :)\n *\n * TODO: future proof, move to compoent land\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isHost(obj) {\n  var str = {}.toString.call(obj);\n\n  switch (str) {\n    case '[object File]':\n    case '[object Blob]':\n    case '[object FormData]':\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Determine XHR.\n */\n\nrequest.getXHR = function () {\n  if (root.XMLHttpRequest\n      && (!root.location || 'file:' != root.location.protocol\n          || !root.ActiveXObject)) {\n    return new XMLHttpRequest;\n  } else {\n    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}\n  }\n  return false;\n};\n\n/**\n * Removes leading and trailing whitespace, added to support IE.\n *\n * @param {String} s\n * @return {String}\n * @api private\n */\n\nvar trim = ''.trim\n  ? function(s) { return s.trim(); }\n  : function(s) { return s.replace(/(^\\s*|\\s*$)/g, ''); };\n\n/**\n * Check if `obj` is an object.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n\n/**\n * Serialize the given `obj`.\n *\n * @param {Object} obj\n * @return {String}\n * @api private\n */\n\nfunction serialize(obj) {\n  if (!isObject(obj)) return obj;\n  var pairs = [];\n  for (var key in obj) {\n    if (null != obj[key]) {\n      pairs.push(encodeURIComponent(key)\n        + '=' + encodeURIComponent(obj[key]));\n    }\n  }\n  return pairs.join('&');\n}\n\n/**\n * Expose serialization method.\n */\n\n request.serializeObject = serialize;\n\n /**\n  * Parse the given x-www-form-urlencoded `str`.\n  *\n  * @param {String} str\n  * @return {Object}\n  * @api private\n  */\n\nfunction parseString(str) {\n  var obj = {};\n  var pairs = str.split('&');\n  var parts;\n  var pair;\n\n  for (var i = 0, len = pairs.length; i < len; ++i) {\n    pair = pairs[i];\n    parts = pair.split('=');\n    obj[decodeURIComponent(parts[0])] = decodeURIComponent(parts[1]);\n  }\n\n  return obj;\n}\n\n/**\n * Expose parser.\n */\n\nrequest.parseString = parseString;\n\n/**\n * Default MIME type map.\n *\n *     superagent.types.xml = 'application/xml';\n *\n */\n\nrequest.types = {\n  html: 'text/html',\n  json: 'application/json',\n  xml: 'application/xml',\n  urlencoded: 'application/x-www-form-urlencoded',\n  'form': 'application/x-www-form-urlencoded',\n  'form-data': 'application/x-www-form-urlencoded'\n};\n\n/**\n * Default serialization map.\n *\n *     superagent.serialize['application/xml'] = function(obj){\n *       return 'generated xml here';\n *     };\n *\n */\n\n request.serialize = {\n   'application/x-www-form-urlencoded': serialize,\n   'application/json': JSON.stringify\n };\n\n /**\n  * Default parsers.\n  *\n  *     superagent.parse['application/xml'] = function(str){\n  *       return { object parsed from str };\n  *     };\n  *\n  */\n\nrequest.parse = {\n  'application/x-www-form-urlencoded': parseString,\n  'application/json': JSON.parse\n};\n\n/**\n * Parse the given header `str` into\n * an object containing the mapped fields.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction parseHeader(str) {\n  var lines = str.split(/\\r?\\n/);\n  var fields = {};\n  var index;\n  var line;\n  var field;\n  var val;\n\n  lines.pop(); // trailing CRLF\n\n  for (var i = 0, len = lines.length; i < len; ++i) {\n    line = lines[i];\n    index = line.indexOf(':');\n    field = line.slice(0, index).toLowerCase();\n    val = trim(line.slice(index + 1));\n    fields[field] = val;\n  }\n\n  return fields;\n}\n\n/**\n * Return the mime type for the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction type(str){\n  return str.split(/ *; */).shift();\n};\n\n/**\n * Return header field parameters.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction params(str){\n  return reduce(str.split(/ *; */), function(obj, str){\n    var parts = str.split(/ *= */)\n      , key = parts.shift()\n      , val = parts.shift();\n\n    if (key && val) obj[key] = val;\n    return obj;\n  }, {});\n};\n\n/**\n * Initialize a new `Response` with the given `xhr`.\n *\n *  - set flags (.ok, .error, etc)\n *  - parse header\n *\n * Examples:\n *\n *  Aliasing `superagent` as `request` is nice:\n *\n *      request = superagent;\n *\n *  We can use the promise-like API, or pass callbacks:\n *\n *      request.get('/').end(function(res){});\n *      request.get('/', function(res){});\n *\n *  Sending data can be chained:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' })\n *        .end(function(res){});\n *\n *  Or passed to `.send()`:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' }, function(res){});\n *\n *  Or passed to `.post()`:\n *\n *      request\n *        .post('/user', { name: 'tj' })\n *        .end(function(res){});\n *\n * Or further reduced to a single call for simple cases:\n *\n *      request\n *        .post('/user', { name: 'tj' }, function(res){});\n *\n * @param {XMLHTTPRequest} xhr\n * @param {Object} options\n * @api private\n */\n\nfunction Response(req, options) {\n  options = options || {};\n  this.req = req;\n  this.xhr = this.req.xhr;\n  // responseText is accessible only if responseType is '' or 'text' and on older browsers\n  this.text = ((this.req.method !='HEAD' && (this.xhr.responseType === '' || this.xhr.responseType === 'text')) || typeof this.xhr.responseType === 'undefined')\n     ? this.xhr.responseText\n     : null;\n  this.statusText = this.req.xhr.statusText;\n  this.setStatusProperties(this.xhr.status);\n  this.header = this.headers = parseHeader(this.xhr.getAllResponseHeaders());\n  // getAllResponseHeaders sometimes falsely returns \"\" for CORS requests, but\n  // getResponseHeader still works. so we get content-type even if getting\n  // other headers fails.\n  this.header['content-type'] = this.xhr.getResponseHeader('content-type');\n  this.setHeaderProperties(this.header);\n  this.body = this.req.method != 'HEAD'\n    ? this.parseBody(this.text ? this.text : this.xhr.response)\n    : null;\n}\n\n/**\n * Get case-insensitive `field` value.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nResponse.prototype.get = function(field){\n  return this.header[field.toLowerCase()];\n};\n\n/**\n * Set header related properties:\n *\n *   - `.type` the content type without params\n *\n * A response of \"Content-Type: text/plain; charset=utf-8\"\n * will provide you with a `.type` of \"text/plain\".\n *\n * @param {Object} header\n * @api private\n */\n\nResponse.prototype.setHeaderProperties = function(header){\n  // content-type\n  var ct = this.header['content-type'] || '';\n  this.type = type(ct);\n\n  // params\n  var obj = params(ct);\n  for (var key in obj) this[key] = obj[key];\n};\n\n/**\n * Parse the given body `str`.\n *\n * Used for auto-parsing of bodies. Parsers\n * are defined on the `superagent.parse` object.\n *\n * @param {String} str\n * @return {Mixed}\n * @api private\n */\n\nResponse.prototype.parseBody = function(str){\n  var parse = request.parse[this.type];\n  return parse && str && (str.length || str instanceof Object)\n    ? parse(str)\n    : null;\n};\n\n/**\n * Set flags such as `.ok` based on `status`.\n *\n * For example a 2xx response will give you a `.ok` of __true__\n * whereas 5xx will be __false__ and `.error` will be __true__. The\n * `.clientError` and `.serverError` are also available to be more\n * specific, and `.statusType` is the class of error ranging from 1..5\n * sometimes useful for mapping respond colors etc.\n *\n * \"sugar\" properties are also defined for common cases. Currently providing:\n *\n *   - .noContent\n *   - .badRequest\n *   - .unauthorized\n *   - .notAcceptable\n *   - .notFound\n *\n * @param {Number} status\n * @api private\n */\n\nResponse.prototype.setStatusProperties = function(status){\n  // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n  if (status === 1223) {\n    status = 204;\n  }\n\n  var type = status / 100 | 0;\n\n  // status / class\n  this.status = status;\n  this.statusType = type;\n\n  // basics\n  this.info = 1 == type;\n  this.ok = 2 == type;\n  this.clientError = 4 == type;\n  this.serverError = 5 == type;\n  this.error = (4 == type || 5 == type)\n    ? this.toError()\n    : false;\n\n  // sugar\n  this.accepted = 202 == status;\n  this.noContent = 204 == status;\n  this.badRequest = 400 == status;\n  this.unauthorized = 401 == status;\n  this.notAcceptable = 406 == status;\n  this.notFound = 404 == status;\n  this.forbidden = 403 == status;\n};\n\n/**\n * Return an `Error` representative of this response.\n *\n * @return {Error}\n * @api public\n */\n\nResponse.prototype.toError = function(){\n  var req = this.req;\n  var method = req.method;\n  var url = req.url;\n\n  var msg = 'cannot ' + method + ' ' + url + ' (' + this.status + ')';\n  var err = new Error(msg);\n  err.status = this.status;\n  err.method = method;\n  err.url = url;\n\n  return err;\n};\n\n/**\n * Expose `Response`.\n */\n\nrequest.Response = Response;\n\n/**\n * Initialize a new `Request` with the given `method` and `url`.\n *\n * @param {String} method\n * @param {String} url\n * @api public\n */\n\nfunction Request(method, url) {\n  var self = this;\n  Emitter.call(this);\n  this._query = this._query || [];\n  this.method = method;\n  this.url = url;\n  this.header = {};\n  this._header = {};\n  this.on('end', function(){\n    var err = null;\n    var res = null;\n\n    try {\n      res = new Response(self);\n    } catch(e) {\n      err = new Error('Parser is unable to parse the response');\n      err.parse = true;\n      err.original = e;\n      return self.callback(err);\n    }\n\n    self.emit('response', res);\n\n    if (err) {\n      return self.callback(err, res);\n    }\n\n    if (res.status >= 200 && res.status < 300) {\n      return self.callback(err, res);\n    }\n\n    var new_err = new Error(res.statusText || 'Unsuccessful HTTP response');\n    new_err.original = err;\n    new_err.response = res;\n    new_err.status = res.status;\n\n    self.callback(err || new_err, res);\n  });\n}\n\n/**\n * Mixin `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Allow for extension\n */\n\nRequest.prototype.use = function(fn) {\n  fn(this);\n  return this;\n}\n\n/**\n * Set timeout to `ms`.\n *\n * @param {Number} ms\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.timeout = function(ms){\n  this._timeout = ms;\n  return this;\n};\n\n/**\n * Clear previous timeout.\n *\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.clearTimeout = function(){\n  this._timeout = 0;\n  clearTimeout(this._timer);\n  return this;\n};\n\n/**\n * Abort the request, and clear potential timeout.\n *\n * @return {Request}\n * @api public\n */\n\nRequest.prototype.abort = function(){\n  if (this.aborted) return;\n  this.aborted = true;\n  this.xhr.abort();\n  this.clearTimeout();\n  this.emit('abort');\n  return this;\n};\n\n/**\n * Set header `field` to `val`, or multiple fields with one object.\n *\n * Examples:\n *\n *      req.get('/')\n *        .set('Accept', 'application/json')\n *        .set('X-API-Key', 'foobar')\n *        .end(callback);\n *\n *      req.get('/')\n *        .set({ Accept: 'application/json', 'X-API-Key': 'foobar' })\n *        .end(callback);\n *\n * @param {String|Object} field\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.set = function(field, val){\n  if (isObject(field)) {\n    for (var key in field) {\n      this.set(key, field[key]);\n    }\n    return this;\n  }\n  this._header[field.toLowerCase()] = val;\n  this.header[field] = val;\n  return this;\n};\n\n/**\n * Remove header `field`.\n *\n * Example:\n *\n *      req.get('/')\n *        .unset('User-Agent')\n *        .end(callback);\n *\n * @param {String} field\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.unset = function(field){\n  delete this._header[field.toLowerCase()];\n  delete this.header[field];\n  return this;\n};\n\n/**\n * Get case-insensitive header `field` value.\n *\n * @param {String} field\n * @return {String}\n * @api private\n */\n\nRequest.prototype.getHeader = function(field){\n  return this._header[field.toLowerCase()];\n};\n\n/**\n * Set Content-Type to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.xml = 'application/xml';\n *\n *      request.post('/')\n *        .type('xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n *      request.post('/')\n *        .type('application/xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n * @param {String} type\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.type = function(type){\n  this.set('Content-Type', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Accept to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.json = 'application/json';\n *\n *      request.get('/agent')\n *        .accept('json')\n *        .end(callback);\n *\n *      request.get('/agent')\n *        .accept('application/json')\n *        .end(callback);\n *\n * @param {String} accept\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.accept = function(type){\n  this.set('Accept', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Authorization field value with `user` and `pass`.\n *\n * @param {String} user\n * @param {String} pass\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.auth = function(user, pass){\n  var str = btoa(user + ':' + pass);\n  this.set('Authorization', 'Basic ' + str);\n  return this;\n};\n\n/**\n* Add query-string `val`.\n*\n* Examples:\n*\n*   request.get('/shoes')\n*     .query('size=10')\n*     .query({ color: 'blue' })\n*\n* @param {Object|String} val\n* @return {Request} for chaining\n* @api public\n*/\n\nRequest.prototype.query = function(val){\n  if ('string' != typeof val) val = serialize(val);\n  if (val) this._query.push(val);\n  return this;\n};\n\n/**\n * Write the field `name` and `val` for \"multipart/form-data\"\n * request bodies.\n *\n * ``` js\n * request.post('/upload')\n *   .field('foo', 'bar')\n *   .end(callback);\n * ```\n *\n * @param {String} name\n * @param {String|Blob|File} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.field = function(name, val){\n  if (!this._formData) this._formData = new root.FormData();\n  this._formData.append(name, val);\n  return this;\n};\n\n/**\n * Queue the given `file` as an attachment to the specified `field`,\n * with optional `filename`.\n *\n * ``` js\n * request.post('/upload')\n *   .attach(new Blob(['<a id=\"a\"><b id=\"b\">hey!</b></a>'], { type: \"text/html\"}))\n *   .end(callback);\n * ```\n *\n * @param {String} field\n * @param {Blob|File} file\n * @param {String} filename\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.attach = function(field, file, filename){\n  if (!this._formData) this._formData = new root.FormData();\n  this._formData.append(field, file, filename);\n  return this;\n};\n\n/**\n * Send `data`, defaulting the `.type()` to \"json\" when\n * an object is given.\n *\n * Examples:\n *\n *       // querystring\n *       request.get('/search')\n *         .end(callback)\n *\n *       // multiple data \"writes\"\n *       request.get('/search')\n *         .send({ search: 'query' })\n *         .send({ range: '1..5' })\n *         .send({ order: 'desc' })\n *         .end(callback)\n *\n *       // manual json\n *       request.post('/user')\n *         .type('json')\n *         .send('{\"name\":\"tj\"})\n *         .end(callback)\n *\n *       // auto json\n *       request.post('/user')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // manual x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send('name=tj')\n *         .end(callback)\n *\n *       // auto x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // defaults to x-www-form-urlencoded\n  *      request.post('/user')\n  *        .send('name=tobi')\n  *        .send('species=ferret')\n  *        .end(callback)\n *\n * @param {String|Object} data\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.send = function(data){\n  var obj = isObject(data);\n  var type = this.getHeader('Content-Type');\n\n  // merge\n  if (obj && isObject(this._data)) {\n    for (var key in data) {\n      this._data[key] = data[key];\n    }\n  } else if ('string' == typeof data) {\n    if (!type) this.type('form');\n    type = this.getHeader('Content-Type');\n    if ('application/x-www-form-urlencoded' == type) {\n      this._data = this._data\n        ? this._data + '&' + data\n        : data;\n    } else {\n      this._data = (this._data || '') + data;\n    }\n  } else {\n    this._data = data;\n  }\n\n  if (!obj || isHost(data)) return this;\n  if (!type) this.type('json');\n  return this;\n};\n\n/**\n * Invoke the callback with `err` and `res`\n * and handle arity check.\n *\n * @param {Error} err\n * @param {Response} res\n * @api private\n */\n\nRequest.prototype.callback = function(err, res){\n  var fn = this._callback;\n  this.clearTimeout();\n  fn(err, res);\n};\n\n/**\n * Invoke callback with x-domain error.\n *\n * @api private\n */\n\nRequest.prototype.crossDomainError = function(){\n  var err = new Error('Origin is not allowed by Access-Control-Allow-Origin');\n  err.crossDomain = true;\n  this.callback(err);\n};\n\n/**\n * Invoke callback with timeout error.\n *\n * @api private\n */\n\nRequest.prototype.timeoutError = function(){\n  var timeout = this._timeout;\n  var err = new Error('timeout of ' + timeout + 'ms exceeded');\n  err.timeout = timeout;\n  this.callback(err);\n};\n\n/**\n * Enable transmission of cookies with x-domain requests.\n *\n * Note that for this to work the origin must not be\n * using \"Access-Control-Allow-Origin\" with a wildcard,\n * and also must set \"Access-Control-Allow-Credentials\"\n * to \"true\".\n *\n * @api public\n */\n\nRequest.prototype.withCredentials = function(){\n  this._withCredentials = true;\n  return this;\n};\n\n/**\n * Initiate request, invoking callback `fn(res)`\n * with an instanceof `Response`.\n *\n * @param {Function} fn\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.end = function(fn){\n  var self = this;\n  var xhr = this.xhr = request.getXHR();\n  var query = this._query.join('&');\n  var timeout = this._timeout;\n  var data = this._formData || this._data;\n\n  // store callback\n  this._callback = fn || noop;\n\n  // state change\n  xhr.onreadystatechange = function(){\n    if (4 != xhr.readyState) return;\n\n    // In IE9, reads to any property (e.g. status) off of an aborted XHR will\n    // result in the error \"Could not complete the operation due to error c00c023f\"\n    var status;\n    try { status = xhr.status } catch(e) { status = 0; }\n\n    if (0 == status) {\n      if (self.timedout) return self.timeoutError();\n      if (self.aborted) return;\n      return self.crossDomainError();\n    }\n    self.emit('end');\n  };\n\n  // progress\n  var handleProgress = function(e){\n    if (e.total > 0) {\n      e.percent = e.loaded / e.total * 100;\n    }\n    self.emit('progress', e);\n  };\n  if (this.hasListeners('progress')) {\n    xhr.onprogress = handleProgress;\n  }\n  try {\n    if (xhr.upload && this.hasListeners('progress')) {\n      xhr.upload.onprogress = handleProgress;\n    }\n  } catch(e) {\n    // Accessing xhr.upload fails in IE from a web worker, so just pretend it doesn't exist.\n    // Reported here:\n    // https://connect.microsoft.com/IE/feedback/details/837245/xmlhttprequest-upload-throws-invalid-argument-when-used-from-web-worker-context\n  }\n\n  // timeout\n  if (timeout && !this._timer) {\n    this._timer = setTimeout(function(){\n      self.timedout = true;\n      self.abort();\n    }, timeout);\n  }\n\n  // querystring\n  if (query) {\n    query = request.serializeObject(query);\n    this.url += ~this.url.indexOf('?')\n      ? '&' + query\n      : '?' + query;\n  }\n\n  // initiate request\n  xhr.open(this.method, this.url, true);\n\n  // CORS\n  if (this._withCredentials) xhr.withCredentials = true;\n\n  // body\n  if ('GET' != this.method && 'HEAD' != this.method && 'string' != typeof data && !isHost(data)) {\n    // serialize stuff\n    var serialize = request.serialize[this.getHeader('Content-Type')];\n    if (serialize) data = serialize(data);\n  }\n\n  // set header fields\n  for (var field in this.header) {\n    if (null == this.header[field]) continue;\n    xhr.setRequestHeader(field, this.header[field]);\n  }\n\n  // send stuff\n  this.emit('request', this);\n  xhr.send(data);\n  return this;\n};\n\n/**\n * Expose `Request`.\n */\n\nrequest.Request = Request;\n\n/**\n * Issue a request:\n *\n * Examples:\n *\n *    request('GET', '/users').end(callback)\n *    request('/users').end(callback)\n *    request('/users', callback)\n *\n * @param {String} method\n * @param {String|Function} url or callback\n * @return {Request}\n * @api public\n */\n\nfunction request(method, url) {\n  // callback\n  if ('function' == typeof url) {\n    return new Request('GET', method).end(url);\n  }\n\n  // url first\n  if (1 == arguments.length) {\n    return new Request('GET', method);\n  }\n\n  return new Request(method, url);\n}\n\n/**\n * GET `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} data or fn\n * @param {Function} fn\n * @return {Request}\n * @api public\n */\n\nrequest.get = function(url, data, fn){\n  var req = request('GET', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.query(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * HEAD `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} data or fn\n * @param {Function} fn\n * @return {Request}\n * @api public\n */\n\nrequest.head = function(url, data, fn){\n  var req = request('HEAD', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * DELETE `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Function} fn\n * @return {Request}\n * @api public\n */\n\nrequest.del = function(url, fn){\n  var req = request('DELETE', url);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * PATCH `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} data\n * @param {Function} fn\n * @return {Request}\n * @api public\n */\n\nrequest.patch = function(url, data, fn){\n  var req = request('PATCH', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * POST `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} data\n * @param {Function} fn\n * @return {Request}\n * @api public\n */\n\nrequest.post = function(url, data, fn){\n  var req = request('POST', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * PUT `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} data or fn\n * @param {Function} fn\n * @return {Request}\n * @api public\n */\n\nrequest.put = function(url, data, fn){\n  var req = request('PUT', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * Expose `request`.\n */\n\nmodule.exports = request;\n","\n/**\n * Expose `Emitter`.\n */\n\nmodule.exports = Emitter;\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n};\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks[event] = this._callbacks[event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  var self = this;\n  this._callbacks = this._callbacks || {};\n\n  function on() {\n    self.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks[event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks[event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n  var args = [].slice.call(arguments, 1)\n    , callbacks = this._callbacks[event];\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks[event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","\n/**\n * Reduce `arr` with `fn`.\n *\n * @param {Array} arr\n * @param {Function} fn\n * @param {Mixed} initial\n *\n * TODO: combatible error handling?\n */\n\nmodule.exports = function(arr, fn, initial){  \n  var idx = 0;\n  var len = arr.length;\n  var curr = arguments.length == 3\n    ? initial\n    : arr[idx++];\n\n  while (idx < len) {\n    curr = fn.call(null, curr, arr[idx], ++idx, arr);\n  }\n  \n  return curr;\n};","var React = require('react')\nvar collections = require('./collections')\nvar Link = require('./fastlink')\nvar PubSub = require('ainojs-pubsub')\nvar ClickHandlers = require('./clickhandlers')\nvar Router = require('./router')\nvar NotFound = require('./components/404')\n\n\n// Contains the skeleton of the App\nmodule.exports = React.createClass({\n  render: function() {\n    var Handler = Router.getRouteHandler(this.props.route.name) || <NotFound />\n    return (\n      <Link onUp={ClickHandlers.onDeviceUp} onDown={ClickHandlers.onDeviceDown} onCancel={ClickHandlers.onDeviceCancel} >\n        <header>\n          <a href=\"/\">Home</a>\n          <a href=\"/detail\">Detail</a>\n        </header>\n        <Handler route={this.props.route} ref=\"handler\" />\n      </Link>\n    )\n  }\n})","var Backbone = require('backbone')\nvar Router = require('./router')\nvar PubSub = require('ainojs-pubsub')\nvar Tick = require('next-tick')\n\nvar getLink = function(target) {\n  while ( target.parentNode && target.nodeName != 'A' )\n    target = target.parentNode\n  return target.nodeName && target.nodeName == 'A' ? target : null\n}\n\nmodule.exports.onDeviceUp = function(e) {\n  var link = getLink(e.target)\n  if ( !link )\n    return\n  \n  link.removeAttribute('data-active')\n  var href = link.getAttribute('href')\n  if ( !href || href == '#' )\n    href = link.getAttribute('data-href')\n\n  if ( href ) {\n    if ( link.getAttribute('target') == '_blank' )\n      window.open(href)\n    else if ( link.hostname !== window.location.hostname || link.protocol !== window.location.protocol)\n      window.location = href\n    else {\n      var fake = document.createElement('a')\n      fake.href = href\n      link.setAttribute('data-href', href)\n      link.setAttribute('href', '#')\n      if ( fake.href == window.location.href ) {\n        Backbone.history.loadUrl(href)\n      } else {\n        PubSub.trigger('clicknav')\n        Tick(function() { Router.navigate(href, true) })\n      }\n    }\n    e.preventDefault()\n  }\n}\n\nmodule.exports.onDeviceDown = function(e) {\n  var link = getLink(e.target)\n  link && link.setAttribute('data-active', '')\n}\n\nmodule.exports.onDeviceCancel = function(e) {\n  var link = getLink(e.target)\n  link && link.removeAttribute('data-active')\n}\n","var Backbone = require('backbone')\nvar Promise = require('promise')\nvar request = require('superagent')\nvar _ = require('underscore')\nvar isNode = require('detect-node')\n\nvar BaseCollection = Backbone.Collection.extend({\n\n  cacheTTL: 60, // in minutes\n\n  dataUrl: null, \n\n  listKey: 'result',\n\n  cache: [],\n\n  model: Backbone.Model.extend({}),\n\n  initialize: function() {\n    Backbone.Collection.prototype.initialize.apply(this, arguments)\n    this.cache = []\n    this._loading = false\n    this._empty = false\n  },\n\n  isCached: function(query) {\n    this.invalidateCache()\n    var q = query ? JSON.stringify(query) : ''\n    return !!_.findWhere(this.cache, { q:q })\n  },\n\n  insertData: function(result) {\n    if ( !result ) \n      throw 'No JSON data found in response'\n    if ( !result.hasOwnProperty(this.listKey) )\n      throw 'Key \"'+this.listKey+'\" not found in response'\n    this._empty = !result[this.listKey].length\n    this.reset(result[this.listKey])\n    this._loading = false\n    this.trigger('change')\n    return result\n  },\n\n  insertDataFromCache: function(cache) {\n    this.cache = cache\n    cache.forEach(function(c) {\n      this.insertData({result: c[this.listKey]})\n    }, this)\n  },\n\n  invalidateCache: function() {\n    if ( isNode )\n      return\n    this.cache = this.cache.filter(function(c) {\n      return c.ttl > Date.now()\n    })\n  },\n\n  load: function(query) {\n\n    return new Promise(function(resolve, reject) {\n\n      this._loading = true\n      this._empty = false\n      this.reset()\n\n      var q = query ? JSON.stringify(query) : ''\n\n      this.invalidateCache()\n      var cache = _.findWhere(this.cache, { q:q })\n\n      if ( cache ) {\n        var result = this.insertData(cache)\n        return resolve(result)\n      }\n\n      var url = isNode ? 'http://localhost:7000' + this.dataUrl : this.dataUrl\n\n      request\n        .get(url)\n        .set('X-Requested-With', 'XMLHttpRequest')\n        .set('Cache-Control', 'no-cache,no-store,must-revalidate,max-age=-1')\n        .query(query)\n        .end(function(err, res) {\n          if ( err )\n            return reject(err.code)\n          if ( res.ok ) {\n            var result = this.insertData(res.body)\n            resolve(result)\n            this.cache.push(_.extend(result, {\n              q: q,\n              ttl: Date.now() + (this.cacheTTL*1000*60)\n            }))\n          } else {\n            reject(res.text)\n          }\n      }.bind(this))\n\n    }.bind(this))\n  },\n\n  isLoading: function() {\n    return !!this._loading\n  },\n\n  isEmpty: function() {\n    return !!this._empty\n  },\n\n  comparator: function(model) {\n    var position = model.get('position')\n    return typeof position != 'undefined' ? position : model.get('name')\n  },\n\n  getModel: function(needle) {\n    var model = this.findWhere(needle)\n    if ( model )\n      return model\n    if ( this._loading )\n      return new this.model() // return empty model so react can still render\n  },\n})\n\nmodule.exports = function(collections) {\n\n  var locals = {}\n  var externals = {}\n  var init = function(){}\n  var i\n\n  for( i in collections ) {\n    locals[i] = BaseCollection.extend(collections[i])\n  }\n\n  // on the client, just expose the local object\n  if ( !isNode ) {\n    for( i in locals ) {\n      externals[i] = new locals[i]()\n    }\n  } else {\n    // on the server, expose an init method so we can attach the collections to the session\n    init = function(session) {\n      session.collections = {}\n      for( var i in locals ) {\n        session.collections[i] = new locals[i]()\n      }\n      externals = session.collections\n    }\n  }\n\n  return {\n    \n    init: init,\n\n    get: function(name) {\n      return externals[name]\n    },\n\n    each: function(cb, context) {\n      return _.each(externals, cb, context || this)\n    }\n  }\n}","var Backbone = require('backbone')\nvar CollectionFactory = require('./collectionfactory')\n\nmodule.exports = CollectionFactory({\n  trending: {\n    dataUrl: '/api/trending',\n    cacheTTL: 5,\n    listKey: 'items'\n  }\n})","var React = require('react')\n\nmodule.exports = React.createClass({\n  render: function() {\n    return '404'\n  }\n})","var React = require('react')\n\nmodule.exports = React.createClass({\n  render: function() {\n    return <h1>Detail</h1>\n  }\n})","var React = require('react')\nvar Data = require('../data')\nvar trending = require('../collections').get('trending')\n\nmodule.exports = React.createClass({\n  mixins: [Data.mixin],\n  getDataDependencies: function() {\n    return [{\n      collection: 'trending',\n      query: {foo: 'bar'}\n    }]\n  },\n  render: function() {\n    if ( trending.isLoading() ) {\n      return <p>Loading trending topics...</p>\n    }\n    return <p>{JSON.stringify(trending)}</p>\n  }\n})","var Promise = require('promise')\nvar collections = require('./collections')\nvar isNode = require('detect-node')\nvar PubSub = require('ainojs-pubsub')\n\nvar resolvers = []\nvar state = false\n\nmodule.exports.mixin = {\n\n  componentWillMount: function() {\n\n    var deps = this.getDataDependencies()\n\n    if ( !deps || !deps.length )\n      return\n\n    var isCached = true\n\n    var promises = deps.map(function(dep) {\n      var collection = collections.get(dep.collection)\n      if ( isCached && !collection.isCached(dep.query) )\n        isCached = false\n      return collection.load(dep.query)\n    })\n\n    // save promises and export them on the server\n    if ( isNode ) {\n      this.dataDidLoad() // always simulate that data has loaded on the server\n      if ( state == 'init' ) {\n        Array.prototype.push.apply(resolvers, promises)\n      }\n    } else {\n      // no need to fulfill promises if cache exists or on first load\n      if ( isCached )\n        this.dataDidLoad()\n      else {\n        PubSub.trigger('loadstart')\n        Promise.all(promises).then(function() {\n          this.dataDidLoad()\n          PubSub.trigger('loadfinish')\n        }.bind(this)).catch(function(e) { console.error(e.stack) })\n      }\n    }\n  }\n}\n\n// expose some lifecycle methods for the server\n\nif ( isNode ) {\n\n  module.exports.getResolvers = function() {\n    state = 'prepare'\n    return resolvers\n  }\n\n  module.exports.dataReady = function() {\n    state = 'ready'\n    resolvers = []\n  }\n\n  module.exports.init = function() {\n    state = 'init'\n    resolvers = []\n  }\n}","\nvar React = require('react')\nvar Tick = require('next-tick')\nvar $ = require('jquery')\n\nvar preventDefault = function(e) {\n  e.preventDefault()\n}\n\nvar listeners = []\n\nvar addListeners = function(obj) {\n  for ( var type in obj ) {\n    document.addEventListener(type, obj[type], false)\n    listeners.push({\n      type: type,\n      fn: obj[type]\n    })\n  }\n}\n\nvar removeListeners = function() {\n  Tick(function() {\n    listeners.forEach(function(obj) {\n      document.removeEventListener(obj.type, obj.fn)\n    })\n  })\n}\n\nmodule.exports = React.createClass({\n\n  contextTypes: {\n    router: React.PropTypes.func\n  },\n\n  timer: null,\n\n  getInitialState: function() {\n    return {\n      type: null,\n      evObj: null,\n      coords: { x:0, y:0 },\n      modified: false\n    }\n  },\n\n  getDefaultProps: function() {\n    return {\n      nodeName: 'div',\n      className: 'link'\n    }\n  },\n\n  componentWillUnmount: function() {\n    removeListeners()\n    this.getDOMNode().removeEventListener('select', preventDefault)\n    clearTimeout(this.timer)\n  },\n\n  trigger: function(type) {\n    var fn = this.props['on'+type.charAt(0).toUpperCase()+type.substr(1)]\n    typeof fn == 'function' && fn(this.state.evObj)\n  },\n\n  getCoords: function(e) {\n    if ( e.touches && e.touches.length ) {\n      var touch = e.touches[0]\n      return {\n        x: touch.pageX,\n        y: touch.pageY\n      }\n    } else {\n      return {\n        x: e.pageX,\n        y: e.pageY\n      }\n    }\n  },\n\n  cancel: function() {\n    this.destroy()\n    this.trigger('cancel')\n  },\n\n  destroy: function() {\n    removeListeners()\n    this.getDOMNode().removeEventListener('select', preventDefault)\n  },\n\n  onMouseDown: function(e) {\n\n    if ( this.state.type == 'touch' )\n      return e.preventDefault()\n\n    if ( e.button !== 0 || !!(e.metaKey || e.altKey || e.ctrlKey || e.shiftKey) ) {\n      return this.setState({\n        modified: true\n      })\n    }\n\n    addListeners({\n      mousemove: this.onMove,\n      mouseup: this.onUp,\n      dragend: this.cancel,\n      contextmenu: this.destroy\n    })\n    \n    this.getDOMNode().addEventListener('select', preventDefault)\n    this.setState({\n      evObj: $.extend(true, {}, e),\n      type: 'mouse'\n    }, function() {\n      this.trigger('down')\n    })\n  },\n\n  onTouchStart: function(e) {\n    if ( this.state.type == 'mouse' )\n      return e.preventDefault()\n    addListeners({\n      touchmove: this.onMove,\n      touchend: this.onUp\n    })\n    this.setState({\n      type: 'touch',\n      evObj: $.extend(true, {}, e)\n    }, function() {\n      this.trigger('down')\n    })\n  },\n\n  onMove: function(e) {\n    var node = this.getDOMNode()\n    if ( e.type == 'mousemove' ) {\n      this.getDOMNode().contains(e.target) || this.cancel()\n    } else {\n      var coords = this.getCoords(e)\n      var distance = Math.max( \n        Math.abs(this.state.coords.x - coords.x), \n        Math.abs(this.state.coords.y - coords.y) \n      )\n      if ( distance > 6 ) {\n        this.cancel()\n      } else {\n        this.setState({\n          coords: coords\n        })\n      }\n    }\n  },\n\n  onUp: function(e) {\n    if ( this.state.modified )\n      return\n    this.timer = setTimeout(function() {\n      this.setState({ type: null })\n    }.bind(this), 400)\n    this.destroy()\n    this.trigger('up')\n  },\n\n  onClick: function(e) {\n    if ( this.state.modified ) {\n      this.setState({\n        modified: false\n      })\n      return\n    }\n    e.preventDefault()\n  },\n\n  render: function() {\n    var nodeName = this.props.nodeName\n    var classNames = [this.props.className]\n\n    var props = {\n      className: classNames.join(' '),\n      onTouchStart: this.onTouchStart,\n      onMouseDown: this.onMouseDown,\n      onClick: this.onClick\n    }\n\n    if ( nodeName == 'a' )\n      props.href = this.props.href\n\n    return React.createElement(nodeName, props, this.props.children)\n  }\n})","var Backbone = require('backbone')\nvar _ = require('underscore')\n\nvar handlers = {\n  home: require('./components/home'),\n  detail: require('./components/detail'),\n  404: require('./components/404')\n}\n\nvar Router = Backbone.Router.extend({\n  initialize: function() {\n    this.route(/(.*)\\/+$/, \"trailFix\", function (id) {\n      // remove all trailing slashes if more than one\n      this.navigate(id.replace(/(\\/)+$/, ''), true);\n    })\n  },\n  routes: {\n    \"\": \"home\",\n    \"detail\" : \"detail\",\n    \"*404\": '404'\n  },\n  history: [],\n  crumbs: [],\n  backbutton: false,\n  getRouteProps: function(loc) {\n    loc = loc || window.location\n    var fragment = decodeURI(loc.pathname + (loc.search || ''))\n    var match = null\n    var routes = _.keys( _.result(this, 'routes') )\n    var props = {\n      name: '',\n      params: []\n    }\n    var i = -1\n    fragment = fragment.replace(/^[#\\/]|\\s+$/g, '').replace(/^\\//,'')\n    \n    while( match === null && ++i<routes.length ) {\n      match = fragment.match(this._routeToRegExp(routes[i]))\n    }\n    if (match) {\n      props.name = this.routes[routes[i]]\n      props.params = match.slice(1, match.length-1)\n    }\n    return props\n  },\n  getRouteHandler: function(name) {\n    if ( name in handlers )\n      return handlers[name]\n    return null\n  }\n})\n\nmodule.exports = new Router()"],"sourceRoot":"/source/"}